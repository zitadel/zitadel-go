#! /bin/sh

if [ -n $1 ]; then
echo $1
    ZITADEL_IMPORT=$1/zitadel
else
    echo "need message import"
    exit 3
fi

protoc \
    -I=/proto/include \
    --go_opt=paths=source_relative \
    --go_out /go/src/github.com/zitadel/zitadel/pkg/grpc \
    /proto/include/authoption/options.proto

protoc \
    -I=/proto/include \
    --go_opt=module=$PREFIX \
    --go-grpc_opt=module=$PREFIX \
    --go_opt=Mzitadel/admin.proto=${ZITADEL_IMPORT}/admin \
    --go_opt=Mzitadel/app.proto=${ZITADEL_IMPORT}/app \
    --go_opt=Mzitadel/auth.proto=${ZITADEL_IMPORT}/auth \
    --go_opt=Mzitadel/action.proto=${ZITADEL_IMPORT}/action \
    --go_opt=Mzitadel/auth_n_key.proto=${ZITADEL_IMPORT}/authn \
    --go_opt=Mzitadel/change.proto=${ZITADEL_IMPORT}/change \
    --go_opt=Mzitadel/event.proto=${ZITADEL_IMPORT}/event \
    --go_opt=Mzitadel/feature.proto=${ZITADEL_IMPORT}/feature \
    --go_opt=Mzitadel/idp.proto=${ZITADEL_IMPORT}/idp \
    --go_opt=Mzitadel/instance.proto=${ZITADEL_IMPORT}/instance \
    --go_opt=Mzitadel/management.proto=${ZITADEL_IMPORT}/management \
    --go_opt=Mzitadel/member.proto=${ZITADEL_IMPORT}/member \
    --go_opt=Mzitadel/message.proto=${ZITADEL_IMPORT}/message \
    --go_opt=Mzitadel/metadata.proto=${ZITADEL_IMPORT}/metadata \
    --go_opt=Mzitadel/milestone/v1/milestone.proto=${ZITADEL_IMPORT}/milestone \
    --go_opt=Mzitadel/object.proto=${ZITADEL_IMPORT}/object \
    --go_opt=Mzitadel/options.proto=${ZITADEL_IMPORT}/authoption \
    --go_opt=Mzitadel/org.proto=${ZITADEL_IMPORT}/org \
    --go_opt=Mzitadel/policy.proto=${ZITADEL_IMPORT}/policy \
    --go_opt=Mzitadel/project.proto=${ZITADEL_IMPORT}/project \
    --go_opt=Mzitadel/quota.proto=${ZITADEL_IMPORT}/quota \
    --go_opt=Mzitadel/settings.proto=${ZITADEL_IMPORT}/settings \
    --go_opt=Mzitadel/system.proto=${ZITADEL_IMPORT}/system \
    --go_opt=Mzitadel/text.proto=${ZITADEL_IMPORT}/text \
    --go_opt=Mzitadel/user.proto=${ZITADEL_IMPORT}/user \
    --go_opt=Mzitadel/v1.proto=${ZITADEL_IMPORT}/v1 \
    --go_opt=Mzitadel/protoc_gen_zitadel/v2/options.proto=${ZITADEL_IMPORT}/protoc/v2 \
    --go_opt=Mzitadel/action/v2beta/action_service.proto=${ZITADEL_IMPORT}/action/v2beta \
    --go_opt=Mzitadel/action/v2beta/execution.proto=${ZITADEL_IMPORT}/action/v2beta \
    --go_opt=Mzitadel/action/v2beta/query.proto=${ZITADEL_IMPORT}/action/v2beta \
    --go_opt=Mzitadel/action/v2beta/target.proto=${ZITADEL_IMPORT}/action/v2beta \
    --go_opt=Mzitadel/feature/v2beta/feature.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/feature/v2beta/feature_service.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/feature/v2beta/instance.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/feature/v2beta/organization.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/feature/v2beta/system.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/feature/v2beta/user.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/filter/v2beta/filter.proto=${ZITADEL_IMPORT}/filter/v2beta \
    --go_opt=Mzitadel/object/v2beta/object.proto=${ZITADEL_IMPORT}/object/v2beta \
    --go_opt=Mzitadel/session/v2beta/challenge.proto=${ZITADEL_IMPORT}/session/v2beta \
    --go_opt=Mzitadel/session/v2beta/session.proto=${ZITADEL_IMPORT}/session/v2beta \
    --go_opt=Mzitadel/session/v2beta/session_service.proto=${ZITADEL_IMPORT}/session/v2beta \
    --go_opt=Mzitadel/session/v2/session_service.proto=${ZITADEL_IMPORT}/session/v2 \
    --go_opt=Mzitadel/oidc/v2beta/authorization.proto=${ZITADEL_IMPORT}/oidc/v2beta \
    --go_opt=Mzitadel/oidc/v2beta/oidc_service.proto=${ZITADEL_IMPORT}/oidc/v2beta \
    --go_opt=Mzitadel/org/v2beta/org_service.proto=${ZITADEL_IMPORT}/org/v2beta \
    --go_opt=Mzitadel/settings/v2beta/branding_settings.proto=${ZITADEL_IMPORT}/settings/v2beta \
    --go_opt=Mzitadel/settings/v2beta/domain_settings.proto=${ZITADEL_IMPORT}/settings/v2beta \
    --go_opt=Mzitadel/settings/v2beta/legal_settings.proto=${ZITADEL_IMPORT}/settings/v2beta \
    --go_opt=Mzitadel/settings/v2beta/lockout_settings.proto=${ZITADEL_IMPORT}/settings/v2beta \
    --go_opt=Mzitadel/settings/v2beta/login_settings.proto=${ZITADEL_IMPORT}/settings/v2beta \
    --go_opt=Mzitadel/settings/v2beta/password_settings.proto=${ZITADEL_IMPORT}/settings/v2beta \
    --go_opt=Mzitadel/settings/v2beta/security_settings.proto=${ZITADEL_IMPORT}/settings/v2beta \
    --go_opt=Mzitadel/settings/v2beta/settings.proto=${ZITADEL_IMPORT}/settings/v2beta \
    --go_opt=Mzitadel/settings/v2beta/settings_service.proto=${ZITADEL_IMPORT}/settings/v2beta \
    --go_opt=Mzitadel/user/v2beta/auth.proto=${ZITADEL_IMPORT}/user/v2beta \
    --go_opt=Mzitadel/user/v2beta/email.proto=${ZITADEL_IMPORT}/user/v2beta \
    --go_opt=Mzitadel/user/v2beta/idp.proto=${ZITADEL_IMPORT}/user/v2beta \
    --go_opt=Mzitadel/user/v2beta/password.proto=${ZITADEL_IMPORT}/user/v2beta \
    --go_opt=Mzitadel/user/v2beta/phone.proto=${ZITADEL_IMPORT}/user/v2beta \
    --go_opt=Mzitadel/user/v2beta/query.proto=${ZITADEL_IMPORT}/user/v2beta \
    --go_opt=Mzitadel/user/v2beta/user.proto=${ZITADEL_IMPORT}/user/v2beta \
    --go_opt=Mzitadel/user/v2beta/user_service.proto=${ZITADEL_IMPORT}/user/v2beta \
    --go_opt=Mzitadel/webkey/v2beta/key.proto=${ZITADEL_IMPORT}/webkey/v2beta \
    --go_opt=Mzitadel/webkey/v2beta/webkey_service.proto=${ZITADEL_IMPORT}/webkey/v2beta \
    --go_opt=Mzitadel/analytics/v2beta/telemetry.proto=${ZITADEL_IMPORT}/analytics/v2beta \
    --go_opt=Mzitadel/analytics/v2beta/telemetry_service.proto=${ZITADEL_IMPORT}/analytics/v2beta \
    --go_opt=Mzitadel/app/v2beta/api.proto=${ZITADEL_IMPORT}/app/v2beta \
    --go_opt=Mzitadel/app/v2beta/app.proto=${ZITADEL_IMPORT}/app/v2beta \
    --go_opt=Mzitadel/app/v2beta/app_service.proto=${ZITADEL_IMPORT}/app/v2beta \
    --go_opt=Mzitadel/app/v2beta/login.proto=${ZITADEL_IMPORT}/app/v2beta \
    --go_opt=Mzitadel/app/v2beta/oidc.proto=${ZITADEL_IMPORT}/app/v2beta \
    --go_opt=Mzitadel/app/v2beta/saml.proto=${ZITADEL_IMPORT}/app/v2beta \
    --go_opt=Mzitadel/authorization/v2beta/authorization.proto=${ZITADEL_IMPORT}/authorization/v2beta \
    --go_opt=Mzitadel/authorization/v2beta/authorization_service.proto=${ZITADEL_IMPORT}/authorization/v2beta \
    --go_opt=Mzitadel/feature/v2beta/feature.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/feature/v2beta/feature_service.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/feature/v2beta/instance.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/feature/v2beta/organization.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/feature/v2beta/system.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/feature/v2beta/user.proto=${ZITADEL_IMPORT}/feature/v2beta \
    --go_opt=Mzitadel/instance/v2beta/instance.proto=${ZITADEL_IMPORT}/instance/v2beta \
    --go_opt=Mzitadel/instance/v2beta/instance_service.proto=${ZITADEL_IMPORT}/instance/v2beta \
    --go_opt=Mzitadel/internal_permission/v2beta/internal_permission_service.proto=${ZITADEL_IMPORT}/internal_permission/v2beta \
    --go_opt=Mzitadel/internal_permission/v2beta/query.proto=${ZITADEL_IMPORT}/internal_permission/v2beta \
    --go_opt=Mzitadel/project/v2beta/project_service.proto=${ZITADEL_IMPORT}/project/v2beta \
    --go_opt=Mzitadel/project/v2beta/query.proto=${ZITADEL_IMPORT}/project/v2beta \
    --go_opt=Mzitadel/filter/v2/filter.proto=${ZITADEL_IMPORT}/filter/v2 \
    --go_opt=Mzitadel/metadata/v2/metadata.proto=${ZITADEL_IMPORT}/metadata/v2 \
    --go_opt=Mzitadel/metadata/v2beta/metadata.proto=${ZITADEL_IMPORT}/metadata/v2beta \
    --go_opt=Mzitadel/org/v2beta/org.proto=${ZITADEL_IMPORT}/org/v2beta \
    --go_opt=Mzitadel/feature/v2/feature.proto=${ZITADEL_IMPORT}/feature/v2 \
    --go_opt=Mzitadel/feature/v2/feature_service.proto=${ZITADEL_IMPORT}/feature/v2 \
    --go_opt=Mzitadel/feature/v2/instance.proto=${ZITADEL_IMPORT}/feature/v2 \
    --go_opt=Mzitadel/feature/v2/organization.proto=${ZITADEL_IMPORT}/feature/v2 \
    --go_opt=Mzitadel/feature/v2/system.proto=${ZITADEL_IMPORT}/feature/v2 \
    --go_opt=Mzitadel/feature/v2/user.proto=${ZITADEL_IMPORT}/feature/v2 \
    --go_opt=Mzitadel/idp/v2/idp.proto=${ZITADEL_IMPORT}/idp/v2 \
    --go_opt=Mzitadel/object/v2/object.proto=${ZITADEL_IMPORT}/object/v2 \
    --go_opt=Mzitadel/session/v2/challenge.proto=${ZITADEL_IMPORT}/session/v2 \
    --go_opt=Mzitadel/session/v2/session.proto=${ZITADEL_IMPORT}/session/v2 \
    --go_opt=Mzitadel/oidc/v2/authorization.proto=${ZITADEL_IMPORT}/oidc/v2 \
    --go_opt=Mzitadel/oidc/v2/oidc_service.proto=${ZITADEL_IMPORT}/oidc/v2 \
    --go_opt=Mzitadel/org/v2/org.proto=${ZITADEL_IMPORT}/org/v2 \
    --go_opt=Mzitadel/org/v2/query.proto=${ZITADEL_IMPORT}/org/v2 \
    --go_opt=Mzitadel/org/v2/org_service.proto=${ZITADEL_IMPORT}/org/v2 \
    --go_opt=Mzitadel/saml/v2/authorization.proto=${ZITADEL_IMPORT}/saml/v2 \
    --go_opt=Mzitadel/saml/v2/saml_service.proto=${ZITADEL_IMPORT}/saml/v2 \
    --go_opt=Mzitadel/settings/v2/branding_settings.proto=${ZITADEL_IMPORT}/settings/v2 \
    --go_opt=Mzitadel/settings/v2/domain_settings.proto=${ZITADEL_IMPORT}/settings/v2 \
    --go_opt=Mzitadel/settings/v2/legal_settings.proto=${ZITADEL_IMPORT}/settings/v2 \
    --go_opt=Mzitadel/settings/v2/lockout_settings.proto=${ZITADEL_IMPORT}/settings/v2 \
    --go_opt=Mzitadel/settings/v2/login_settings.proto=${ZITADEL_IMPORT}/settings/v2 \
    --go_opt=Mzitadel/settings/v2/password_settings.proto=${ZITADEL_IMPORT}/settings/v2 \
    --go_opt=Mzitadel/settings/v2/security_settings.proto=${ZITADEL_IMPORT}/settings/v2 \
    --go_opt=Mzitadel/settings/v2/settings.proto=${ZITADEL_IMPORT}/settings/v2 \
    --go_opt=Mzitadel/settings/v2/settings_service.proto=${ZITADEL_IMPORT}/settings/v2 \
    --go_opt=Mzitadel/user/v2/auth.proto=${ZITADEL_IMPORT}/user/v2 \
    --go_opt=Mzitadel/user/v2/email.proto=${ZITADEL_IMPORT}/user/v2 \
    --go_opt=Mzitadel/user/v2/idp.proto=${ZITADEL_IMPORT}/user/v2 \
    --go_opt=Mzitadel/user/v2/key.proto=${ZITADEL_IMPORT}/user/v2 \
    --go_opt=Mzitadel/user/v2/password.proto=${ZITADEL_IMPORT}/user/v2 \
    --go_opt=Mzitadel/user/v2/pat.proto=${ZITADEL_IMPORT}/user/v2 \
    --go_opt=Mzitadel/user/v2/phone.proto=${ZITADEL_IMPORT}/user/v2 \
    --go_opt=Mzitadel/user/v2/query.proto=${ZITADEL_IMPORT}/user/v2 \
    --go_opt=Mzitadel/user/v2/user.proto=${ZITADEL_IMPORT}/user/v2 \
    --go_opt=Mzitadel/user/v2/user_service.proto=${ZITADEL_IMPORT}/user/v2 \
    --go_opt=Mzitadel/webkey/v2/key.proto=${ZITADEL_IMPORT}/webkey/v2 \
    --go_opt=Mzitadel/webkey/v2/webkey_service.proto=${ZITADEL_IMPORT}/webkey/v2 \
    --go_opt=Mzitadel/object/v3alpha/object.proto=${ZITADEL_IMPORT}/object/v3lapha \
    --go_out /go/src \
    --go-grpc_out /go/src \
    $(find /proto/include/zitadel -iname *.proto)
